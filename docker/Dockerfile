ARG ECR_REPO_ARG
ARG ECR_USER_ARG
FROM ${ECR_REPO_ARG}/${ECR_USER_ARG}/graalvm21.2.0-agent:1.0.0

ARG ECR_REPO_ARG
ARG ECR_USER_ARG
ENV ECR_URL=${ECR_REPO_ARG}/${ECR_USER_ARG}/

ARG PROJECT_NAME
COPY ${PROJECT_NAME} /opt/${PROJECT_NAME}

WORKDIR /opt/${PROJECT_NAME} 
RUN gradle build -Dquarkus.package.type=native
ENTRYPOINT [ "./build/${PROJECT_NAME}-1.0.0-SNAPSHOT-runner" ]